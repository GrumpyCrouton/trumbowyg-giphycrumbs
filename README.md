# trumbowyg-giphycrumbs
A giphy plugin for Trumbowyg which allows you to use modals built into your page instead of the Trumbowyg modal.

# Background

Do you use the Trumbowyg text editor? Do you want to integrate Giphy into your editor but dislike the existing Giphy plugin which utilizes Trumbowygs modal? Does your CSS framework have support for it's own modals, or have you created your own modal code? Well, this plugin is for you.

# Installing

Simply download the trumbowyg.giphycrumbs.min.js file above, and include the script on your page using a `<script>` tag after you have included trumbowygs javascript file.

# Setting it Up

## Pre-setup

GiphyCrumbs requires a little bit more set up to function properly.

* Add your own modal code to your page
  * Modal will need to contain the following elements:
    * An image container
    * A search input
* Generate an API key [from Giphy](https://support.giphy.com/hc/en-us/articles/360020283431-Request-A-GIPHY-API-Key)

## Initializing Plugin

First, you need to add `giphycrumbs` as a [button in your toolbar](https://alex-d.github.io/Trumbowyg/documentation/#button-pane).

Next, you'll need to define some settings for the plugin.

```
texteditor.trumbowyg({
  plugins: {
    giphycrumbs: {
      //define settings
    }
  }
});
```

### Required Settings

Some settings are required for the plugin to work.

| Setting Name | Setting Type | Definition |
|-|-|-|
| apiKey | String | API Key from Giphy |
| img_tag | String | Controls the <img> tag used by Giphy (see img_container_selector) |
| modal_selector | String | Selector for Modal |
| giphy_selector | String | Selector for <img> tag generated by Giphy<br>(attaches click handler to add picture to Trumbowyg) |
| search_selector | String | Selector for search input to search Giphy |
| img_container_selector | String | Selector for container which will be filled by Giphy<br>(on-load and during searches) |
| open_modal | Function | Function which opens your modal (modal_selector argument is passed) |
| close_modal | Function | Function which closes your modal (modal_selector argument is passed) |

With all of that said, your initilization may look like this (Using Fomantic-UI modal example):

```
texteditor.trumbowyg({
    plugins: {
        giphycrumbs: {
            apiKey: 'GIPHY-API-KEY',
            img_tag: '<img class="ui fluid card add_giphy"></img>',
            img_container_selector: '#giphy_modal_images',
            modal_selector: '#giphy_modal',
            giphy_selector: '.add_giphy',
            search_selector: '#giphy_modal_search',
            close_modal: function(selector) {
                $(selector).modal('hide');
            },
            open_modal: function(selector) {
                $(selector).modal('show');
            }
        }
    }
});
```

Which would go along with a modal which looks like this:

```
<div id="giphy_modal" class="ui modal">
   <div class="content">
      <h2>Giphy Search</h2>
      <div class="description">
         <div class="ui form">
            <div class="field">
               <input type="text" id="giphy_modal_search"/>
            </div>
         </div>
         <hr>
         <div id="giphy_modal_images" class="ui three column doubling stackable masonry grid"></div>
      </div>
   </div>
</div>
```

### Optional Settings

Some settings have a default value which means they are optional.

| Setting Name | Setting Type | Default Setting | Definition |
|-|-|-|-|
| rating | String | "g" | Controls content rating on Giphy returns |
| icon | String | SVG Path | Path for SVG icon for Trumbowyg button |
| search_delay | Int | 750 | Time between when the user stops typing in the search<br>and the Giphy API is actually called (prevents a search on every keyup event) |
| img_wrapper | String | "<div></div>" | Define an element which wraps around the <img> tag defined in the `img_tag` setting. |
